# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Weather Big Data ETL System

## üìê –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—É—é ETL-–ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è —Å–±–æ—Ä–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

## üèóÔ∏è –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. **Data Source (–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö)**
- **Open-Meteo Archive API**: –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–µ–æ—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
- **–§–æ—Ä–º–∞—Ç**: JSON —á–µ—Ä–µ–∑ REST API
- **–î–∞–Ω–Ω—ã–µ**: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –≤–ª–∞–∂–Ω–æ—Å—Ç—å –ø–æ —á–∞—Å–∞–º –¥–ª—è 5 –≥–æ—Ä–æ–¥–æ–≤ (London, Berlin, Madrid, Moscow, Paris)

### 2. **Ingestion Layer (–°–ª–æ–π —Å–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö)**

#### 2.1 FastAPI Service (`app/main.py`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è ETL –ø—Ä–æ—Ü–µ—Å—Å–æ–º
- **Endpoints**:
  - `POST /etl/ingest` - –°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ Open-Meteo
  - `GET /etl/analyze` - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ Dask
  - `GET /etl/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑ PostgreSQL
  - `DELETE /etl/clean` - –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

#### 2.2 Prefect Flow (`app/prefect_flow.py`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è ETL –ø—Ä–æ—Ü–µ—Å—Å–∞
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Task-based workflow
- **–≠—Ç–∞–ø—ã**:
  1. **Extract Task**: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≥–æ—Ä–æ–¥–∞
  2. **Load Task**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ CSV –∏ PostgreSQL
  3. **Transform Task**: –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ Dask

### 3. **Storage Layer (–°–ª–æ–π —Ö—Ä–∞–Ω–µ–Ω–∏—è)**

#### 3.1 PostgreSQL Database
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –ë–î –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
- **–¢–∞–±–ª–∏—Ü—ã**:
  - `weather_data`: –°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ (city, time, temperature, humidity)
  - `weather_aggregated`: –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –≥–æ—Ä–æ–¥–∞–º
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: ACID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∏–Ω–¥–µ–∫—Å—ã, SQL –∑–∞–ø—Ä–æ—Å—ã

#### 3.2 CSV Files (Data Lake)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ Dask
- **–ü–∞—Ç—Ç–µ—Ä–Ω**: Partitioning –ø–æ –≥–æ—Ä–æ–¥–∞–º (–æ–¥–∏–Ω —Ñ–∞–π–ª = –æ–¥–∏–Ω –≥–æ—Ä–æ–¥)
- **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

### 4. **Processing Layer (–°–ª–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏)**

#### 4.1 Dask Distributed Cluster
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
  - **Dask Scheduler**: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∑–∞–¥–∞—á
  - **Dask Workers** (2+): –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è**: Big Data –æ–±—Ä–∞–±–æ—Ç–∫–∞
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
  - Lazy evaluation –≥—Ä–∞—Ñ–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
  - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ CSV —Ñ–∞–π–ª–æ–≤
  - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ –≥–æ—Ä–æ–¥–∞–º
- **–ú–µ—Ç—Ä–∏–∫–∏**: –°—Ä–µ–¥–Ω—è—è/–º–∞–∫—Å/–º–∏–Ω —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, —Å—Ä–µ–¥–Ω—è—è –≤–ª–∞–∂–Ω–æ—Å—Ç—å

### 5. **Visualization Layer (–°–ª–æ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏)**

#### 5.1 Streamlit Dashboard (`app/streamlit_app.py`)
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
  - **–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã**: –ì—Ä–∞—Ñ–∏–∫–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏
  - **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≥–æ—Ä–æ–¥–æ–≤**: Bar charts, box plots
  - **–¢–µ–ø–ª–æ–≤—ã–µ –∫–∞—Ä—Ç—ã**: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫
  - **–¢–∞–±–ª–∏—Ü—ã**: –°—ã—Ä—ã–µ –∏ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **–í–∏–¥–∂–µ—Ç—ã**:
  - –§–∏–ª—å—Ç—Ä—ã –ø–æ –≥–æ—Ä–æ–¥–∞–º
  - –°–ª–∞–π–¥–µ—Ä –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π
  - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
  - –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV

## üîÑ ETL –ü—Ä–æ—Ü–µ—Å—Å

### –≠—Ç–∞–ø 1: Extract (–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ)
```
Open-Meteo API ‚Üí JSON Response ‚Üí Pandas DataFrame
```
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≥–æ—Ä–æ–¥–∞
- –û–±–æ–≥–∞—â–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ city)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –≠—Ç–∞–ø 2: Load (–ó–∞–≥—Ä—É–∑–∫–∞)
```
DataFrame ‚Üí CSV File (–¥–ª—è Dask) + PostgreSQL (–¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è)
```
- **CSV**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `/data/{city}.csv` –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **PostgreSQL**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏

### –≠—Ç–∞–ø 3: Transform (–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è)
```
Dask Cluster ‚Üí Parallel Processing ‚Üí Aggregation ‚Üí PostgreSQL
```
1. **Lazy Read**: `dd.read_csv("data/*.csv")` - —Å–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
2. **GroupBy**: –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ –≥–æ—Ä–æ–¥–∞–º
3. **Compute**: –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞ –≤–æ—Ä–∫–µ—Ä–∞—Ö
4. **Save**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ `weather_aggregated`

## üê≥ Docker Architecture

### –°–µ—Ä–≤–∏—Å—ã:

1. **postgres**: PostgreSQL 15-alpine
   - –í–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç: 5433 (–¥–ª—è –¥–æ—Å—Ç—É–ø–∞ —Å —Ö–æ—Å—Ç–∞)
   - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç: 5432 (–¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ Docker —Å–µ—Ç–∏)
   - Volume: `postgres_data` (persistent storage)

2. **dask-scheduler**: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä –∫–ª–∞—Å—Ç–µ—Ä–∞
   - –ü–æ—Ä—Ç—ã: 8786 (scheduler), 8787 (dashboard)

3. **dask-worker**: –†–∞–±–æ—á–∏–µ —É–∑–ª—ã (2 —Ä–µ–ø–ª–∏–∫–∏)
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ scheduler –∏ postgres
   - –î–æ—Å—Ç—É–ø –∫ `/data` volume

4. **api**: FastAPI —Å–µ—Ä–≤–∏—Å
   - –ü–æ—Ä—Ç: 8000
   - Swagger UI: `/docs`

5. **prefect-server**: –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è ETL
   - –í–Ω–µ—à–Ω–∏–π –ø–æ—Ä—Ç: 4201 (Prefect UI)
   - –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç: 4200

6. **streamlit**: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
   - –ü–æ—Ä—Ç: 8501

### Network:
- –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ —Å–µ—Ç–∏ `data-net`
- –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π DNS –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏

### Volumes:
- `./data:/data` - –æ–±—â–∏–π –¥–æ—Å—Ç—É–ø –∫ CSV —Ñ–∞–π–ª–∞–º
- `postgres_data` - –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ë–î

## üìä Data Flow Diagram

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Open-Meteo  ‚îÇ
‚îÇ    API      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  FastAPI/Prefect‚îÇ
‚îÇ   (Ingestion)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
       ‚ñº              ‚ñº              ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   CSV    ‚îÇ   ‚îÇ PostgreSQL  ‚îÇ  ‚îÇ  Dask    ‚îÇ
‚îÇ  Files   ‚îÇ   ‚îÇ  Database   ‚îÇ  ‚îÇ Cluster  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
     ‚îÇ                ‚îÇ              ‚îÇ
     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ  Aggregation  ‚îÇ
              ‚îÇ   (Dask)      ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ  PostgreSQL   ‚îÇ
              ‚îÇ (Aggregated)  ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ   Streamlit   ‚îÇ
              ‚îÇ  Dashboard    ‚îÇ
              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Big Data:
- **Dask Distributed**: –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
  - Lazy evaluation
  - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
  - –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

### –•—Ä–∞–Ω–µ–Ω–∏–µ:
- **PostgreSQL**: –†–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –ë–î
  - ACID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - SQL –∑–∞–ø—Ä–æ—Å—ã

### ETL –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è:
- **Prefect**: Workflow orchestration
  - Task-based architecture
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
  - Retry –º–µ—Ö–∞–Ω–∏–∑–º—ã

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:
- **Streamlit**: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π dashboard
  - Plotly –≥—Ä–∞—Ñ–∏–∫–∏
  - –í–∏–¥–∂–µ—Ç—ã –∏ —Ñ–∏–ª—å—Ç—Ä—ã
  - Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- **Docker Compose**: –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
- **FastAPI**: REST API
- **Pandas**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:
- **Dask Workers**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –≤–æ—Ä–∫–µ—Ä–æ–≤
  ```bash
  docker-compose up --scale dask-worker=4
  ```

### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:
- **PostgreSQL**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ docker-compose
- **Memory**: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –¥–ª—è Dask workers

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

1. **Dask Dashboard**: `http://localhost:8787/status`
   - Task stream visualization
   - Worker status
   - Performance metrics

2. **Prefect UI**: `http://localhost:4201`
   - Flow runs
   - Task execution logs
   - Schedule management

3. **Streamlit Dashboard**: `http://localhost:8501`
   - Data visualization
   - Real-time statistics

## üöÄ –≠—Ç–∞–ø—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –≤ PostgreSQL
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Dask cluster
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API

### 2. Extract (–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ)
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ Open-Meteo
- –ü–∞—Ä—Å–∏–Ω–≥ JSON –æ—Ç–≤–µ—Ç–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ DataFrames

### 3. Load (–ó–∞–≥—Ä—É–∑–∫–∞)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ CSV (partitioning –ø–æ –≥–æ—Ä–æ–¥–∞–º)
- Batch insert –≤ PostgreSQL
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### 4. Transform (–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è)
- –°–æ–∑–¥–∞–Ω–∏–µ Dask DataFrame –∏–∑ CSV
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π (groupby, agg)
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞ –≤–æ—Ä–∫–µ—Ä–∞—Ö
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### 5. Visualization (–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è)
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ PostgreSQL
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ (Plotly)
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≤–∏–¥–∂–µ—Ç—ã (Streamlit)

## üìù Best Practices

1. **Data Partitioning**: CSV —Ñ–∞–π–ª—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –ø–æ –≥–æ—Ä–æ–¥–∞–º –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
2. **Lazy Evaluation**: Dask —Å–æ–∑–¥–∞–µ—Ç –≥—Ä–∞—Ñ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º
3. **Error Handling**: Try-catch –±–ª–æ–∫–∏ –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö
4. **Logging**: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Prefect tasks
5. **Health Checks**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è credentials
- –ò–∑–æ–ª—è—Ü–∏—è —Å–µ—Ç–µ–π Docker
- –ù–µ—Ç —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ API

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **Dask Documentation**: https://docs.dask.org/
- **Prefect Documentation**: https://docs.prefect.io/
- **Streamlit Documentation**: https://docs.streamlit.io/
- **PostgreSQL Documentation**: https://www.postgresql.org/docs/

